Options +FollowSymlinks
RewriteEngine on
RewriteBase /
RewriteCond %{REQUEST_URI} !^/index.html
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^API backend/api.php
RewriteRule ^FS/(.*) backend/api.php?file=/$1
RewriteRule ^FS backend/api.php?upload
RewriteRule ^(bin|doc) - [F,L,NC]

<FilesMatch "\.(html|htm|js|css|json)$">
  FileETag None
  <ifModule mod_headers.c>
    Header unset ETag
    Header set Cache-Control "max-age=0, no-cache, no-store, must-revalidate"
    Header set Pragma "no-cache"
    Header set Expires "Wed, 11 Jan 1984 05:00:00 GMT"
  </ifModule>
</FilesMatch>

<ifModule mod_mime.c>
  AddType audio/aac .aac
  AddType audio/mp4 .mp4
  AddType audio/mp4 .m4a
  AddType audio/mpeg .mp1
  AddType audio/mpeg .mp2
  AddType audio/mpeg .mp3
  AddType audio/mpeg .mpg
  AddType audio/mpeg .mpeg
  AddType audio/ogg .oga
  AddType audio/ogg .ogg
  AddType audio/wav .wav
  AddType audio/webm .webm

  AddType video/mp4 .mp4
  AddType video/mp4 .m4v
  AddType video/ogg .ogv
  AddType video/webm .webm
  AddType video/x-msvideo .avi
  AddType video/x-flv .flv

  AddType text/plain .txt
  AddType text/plain .doc
  AddType osjs/document .odoc
</ifModule>
